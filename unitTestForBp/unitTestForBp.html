<head>
  <title>unitTestForBp</title>
</head>

<body>
  <main role="main">
    <div id="ut-wrapper">
      {{> Template.dynamic template=pageContent }}
    </div>
  </main>

  <nav>{{> nav}}</nav>  
</body>

<template name="nav">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <button id="ih-logo" class="nav-home">iH</button>
        <button id="lr-switch">
          <i class="hand-icon hand-icon-l"></i>
          <span class="fa fa-exchange"></span>
          <i class="hand-icon hand-icon-r active"></i>
        </button>
      </div>
    </div>
  </div>  
</template>

<template name="home">
  {{> search }}

  <div class="container">
    <section>
    {{#if lastMeasure}}
      <h2>Last Check-In</h2>

      <div class="row">
        <div class="col-xs-12">
          <span>{{ lastMeasure.result }}</span>
          <span class="pull-right">{{ lastMeasure.date}}</span>
        </div>
      </div>
    {{/if}}
    </section>
  </div>
</template>


<template name="search">
  <section>
    <h2 class="sr-only">Connecting Your Device</h2>
    <div class="container">
    {{#if selectDevice }}
      <h3>Connected Device</h3>

      <div>
        <span>{{ deviceName selectDevice }}</span>
        <button class="ut-btn {{ lrClass }} nav-measure">
          <span>Use this Device</span>
          <i class="fa fa-arrow-circle-right"></i>
        </button>
      </div>
    {{/if}}

    {{#if statusMsg}}
      <p id="statusMsg">{{ statusMsg }}</p>
    {{/if}}
    </div>

  {{#if hasFoundDevice}}
    <div class="container">
    {{#if selectDevice}}
      <h3>Devices Found</h3>
    {{else}}
      <h3>Step 1: Select a Device</h3>
    {{/if}}
    </div>

    <div id="device-list" class="container-fluid">
      <table>
        <tbody>
        {{#each devices}}
          <tr class="device-option">
            <td>
              <span class="glyphicon glyphicon-modal-window"></span>
              <span>{{ deviceName this }}</span>
              <span class="small pull-right">{{ this.address }}</span>
            </td>
          </tr>
        {{/each}}
        </tbody>
      </table>
    </div>
  {{/if}}

    <div class="container">    
      <div class="row">
        <div class="col-xs-12">
          <button class="ut-btn {{ lrClass lrMode }} {{ uiSearchClass }}">
            <span>{{ uiSearchLabel }}</span>
          </button>
        </div>
      </div>
    </div>
  </section>
</template>

<template name="measure">
  <div class="container">
    <h2>When You're Ready, Press Start</h2>

    <div class="row">
      <button class="ut-btn {{ lrClass lrMode }} {{ uiMeasureClass }}">
        <span>{{ uiMeasureLabel }}</span>
      </button>
    </div>
  </div>

  <div id="measurements" class="container-fluid">
    <div id="bp-container">
    {{#if hasReadings}}
      <span id="bpNumDisplay">{{ bpNumDisplay }}</span>
      <div class="bp-guide-s hide" style={{ getCircleAttrs 180 }}></div>
      <div class="bp-guide-s hide" style={{ getCircleAttrs 160 }}></div>
      <div class="bp-guide-s hide" style={{ getCircleAttrs 140 }}></div>
      <div class="bp-guide-s hide" style={{ getCircleAttrs 120 }}></div>
      <div class="bp-guide-s hide" style={{ getCircleAttrs 90 }}></div>
      {{#if bpMeasure}}
        <div id="bp-measure" class="bp-circle" style={{ getCircleAttrs bpMeasure }}></div>
      {{/if}}

      {{#if bpSystolic}}
        <div id="bp-systolic" class="bp-circle" style={{ getCircleAttrs bpSystolic }}></div>
      {{/if}}

      {{#if bpDiastolic}}
        <div class="bp-guide-d hide" style={{ getCircleAttrs 110 }}></div>
        <div class="bp-guide-d hide" style={{ getCircleAttrs 100 }}></div>
        <div class="bp-guide-d hide" style={{ getCircleAttrs 90 }}></div>
        <div class="bp-guide-d hide" style={{ getCircleAttrs 80 }}></div>
        <div class="bp-guide-d hide" style={{ getCircleAttrs 60 }}></div>
        <div id="bp-diastolic" class="bp-circle" style={{ getCircleAttrs bpDiastolic }}></div>
      {{/if}}
    {{/if}}
    </div>
    <table id="ut-measures" class="table table-striped">
    {{#if hasReadings}}
      <tbody>
        <tr>
          <td class="ut-label">Systolic BP</td>
          <td class="text-right">{{ bpSystolic }}</td>
        </tr>
        <tr>
          <td class="ut-label">Diastolic BP</td>
          <td class="text-right">{{ bpDiastolic }}</td>
        </tr>
        <tr>
          <td class="ut-label">Heart Rate</td>
          <td class="text-right">{{ heartRate }}</td>
        </tr>
        <tr>
          <td class="ut-label">Arrythmia</td>
          <td class="text-right">{{ arrythmia }}</td>
        </tr>
      </tbody>
    {{/if}}    
    </table>
  </div>
</template>